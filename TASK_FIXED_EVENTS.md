# 任务说明：完善固定事件YAML

## 背景

这是《魔法少女的魔女审判》AI对话系统项目。需要根据原作游戏资料，完善固定事件的设计。

---

## 原作关键信息（来自网络搜索）

### 游戏设定
- 13名少女因携带"魔女因子"被囚禁在孤岛监牢
- 猫头鹰典狱长管理，营造高压环境刺激魔女因子生长
- 魔女化会产生杀人冲动
- 发生杀人事件后举行"魔女审判"，投票处刑凶手
- 选错凶手会导致无辜者被处刑

### 周目结构
- **一周目**：主角樱羽艾玛视角，最终几乎全灭
- **二周目**：主角切换为二阶堂希罗（拥有死亡回溯魔法），制作人员名单倒退后开始
- **三周目**：揭示大魔女召唤真相，13人联合觉醒

### 关键角色
- **樱羽艾玛**：一周目主角，普通女高中生
- **二阶堂希罗**：二周目主角，魔法是死亡回溯，一周目开场被处刑
- **冰上梅露露**：监牢运营方，假扮囚犯参与游戏，寻找大魔女
- **月代雪**：大魔女，艾玛初中朋友，故意散播魔女因子

### 案件结构（原作）
- 第一案：希罗开场被处刑（作为威慑）
- 第二案：安安案（手机铃声不在场证明）
- 第三案：雪莉用大力魔法搬房子
- 第四/五案：连续案件，梅露露用魔法拆拼尸体
- 二周目第一案：梅露露被杀

### 游戏流程
1. 日常探索（ADV视觉小说）
2. 杀人事件发生
3. 搜查阶段（收集证据、证言）
4. 魔女审判（辩论、投票）
5. 处刑场景

---

## 当前项目简化版设计

我们的版本简化为"一章多周目"：
- 一章 = 完整一局游戏（约3天游戏内时间）
- 多周目可重玩，带工具继承
- Bad End：任何人死亡 → 重开
- Good End：阻止杀人，没人死
- True End：全员存活 + 所有人压力70-85% + 发现真相 + 联合觉醒

---

## 需要完善的内容

请根据原作设定，补充/修改 `fixed_events.yaml` 文件：

### 1. 第一天事件
- 开场集合、典狱长宣布规则
- 角色自我介绍
- 希罗顶撞典狱长被惩罚（可选是否包含）
- 午餐、晚餐、就寝

### 2. 第二天事件
- 魔法公开/展示事件
- 压力积累
- 角色关系发展

### 3. 第三天事件
- 高压状态
- 杀人事件触发条件
- 或Good End/True End分歧点

### 4. 杀人事件
- 凶手选定逻辑（madness最高者？）
- 作案手法（结合魔法能力）
- 尸体发现

### 5. 调查阶段
- 证据收集
- 证言收集
- 时间限制

### 6. 审判阶段
- 辩论流程
- 投票机制
- 处刑场景

### 7. 结局分歧
- Bad End触发
- Good End条件
- True End条件（参考原作三周目觉醒）

---

## 输出要求

修改或补充 `fixed_events.yaml`，保持现有格式：

```yaml
event_id:
  id: "唯一标识"
  name: "事件名称"
  trigger:
    day: 1
    phase: "morning/free_time/night"
    condition: "触发条件"
  priority: 100
  scene:
    location: "地点"
    required_characters: "all/all_alive/[角色列表]"
  script:
    - speaker: "narrator/角色id"
      text: "台词"
  outcomes:
    # 状态变化
  next_phase: "下一阶段"
```

---

## 参考文件

- `PROJECT_DOC.md` - 项目完整文档
- `fixed_events.yaml` - 当前固定事件（需完善）
- `free_event_templates.yaml` - 自由事件模板
- 角色数据在 `characters/*/` 目录

---

## 注意事项

1. 保持与项目现有设计一致
2. 事件要能被代码逻辑处理
3. 考虑AI对话系统的特性（动态生成，非预设剧本）
4. Bad End/Good End/True End三种结局都要有明确条件
